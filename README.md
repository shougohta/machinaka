# machinaka 

リアルタイムすれ違い検知アプリ

## 基本コンセプト

Bluetooth Low Energyを使用してリアルタイムで近くにいる人を検知し、自然な出会いを創出するモバイルアプリです。ドラクエのすれ違い通信のような偶然性と、現代的なマッチングアプリを組み合わせたコンセプトです。

### すれ違いの仕組み

- **リアルタイム検知**: 同じ空間にいる人だけを対象（カフェの同じテーブル範囲、電車の同じ車両など）
- **数メートル以内**: 本当の「すれ違い」を再現
- **アプリを起動してポケットに**: バックグラウンドで自動検知
- **「ピロン♪」通知**: 近くに同じアプリの人がいたらバイブで通知
- **後で確認**: その場では相手が分からず、後でアプリを開くと「○時頃、○○カフェですれ違いました」

## 主要機能

### 1. すれ違い検知機能
- Bluetooth Low Energy + GPS による近距離検知（半径5-10m程度）
- リアルタイム検知とバイブ/音での通知
- 検知時刻・場所の記録

### 2. プロフィール機能
- 基本情報（年齢、性別、趣味など）
- 出会いの目的設定（恋愛/友達/趣味仲間）
- 匿名性確保（本名不要）

### 3. マッチング機能
- 相互「いいね」でマッチング成立
- すれ違い履歴から後追いでアプローチ可能
- マッチ後は連絡先交換（Instagram/LINE/メール）

## UI設計

### メイン画面
- **待機状態**: シンプルなレーダー風デザイン、「検知中...」のアニメーション
- **すれ違い発生時**: 「ピロン♪」音 + バイブ、「すれ違いました！」通知

### すれ違い履歴画面
- 「○月○日 14:30 渋谷のカフェで」形式の履歴リスト
- 匿名アイコン + 基本情報
- 「いいね」ボタン

### マッチング後
- 「マッチしました！」通知
- 連絡先交換の選択肢（Instagram/LINE/メール）
- アプリ外でのやり取りに移行

## 収益化モデル

### フリーミアム
**無料版**
- 基本のすれ違い検知
- 1日3回まで「いいね」
- 直近24時間のすれ違い履歴のみ

**有料版（月額500-800円）**
- 無制限「いいね」
- すれ違い履歴30日保存
- 詳細フィルター（年齢、趣味など）
- 「あなたにいいねした人」表示

## 技術スタック

- **Frontend**: React Native + TypeScript + Expo
- **Backend**: Node.js + Express + Socket.io + TypeScript
- **Database**: PostgreSQL + Redis
- **Infrastructure**: Railway/AWS + GitHub Actions
- **Communication**: WebSocket (リアルタイム通信)
- **Proximity**: Bluetooth Low Energy API
- **Location**: GPS/位置情報API

## プロジェクト構成

```
machinaka/
├── apps/
│   ├── mobile/     # React Nativeアプリ
│   └── web/        # 管理画面（将来的）
├── packages/
│   ├── backend/    # Node.js APIサーバー
│   └── shared/     # 共通型定義
├── docs/           # ドキュメント
├── .github/        # GitHub Actions
└── deploy/         # デプロイ設定
```

## 開発環境セットアップ

```bash
# 依存関係をインストール
npm install

# 開発サーバー起動（バックエンド + モバイル）
npm run dev

# バックエンドのみ
npm run dev:backend

# モバイルアプリのみ
npm run dev:mobile
```

## プライバシー・安全性

- 正確な位置情報は記録しない（エリア程度）
- ユーザーID暗号化
- ブロック・通報機能
- 匿名性重視設計